#!/bin/bash
#
# For Ubuntu 15.0: 
#   get Ansible >= 2.0 (not bundled with Ubuntu 15.10)
#   see http://docs.ansible.com/ansible/intro_installation.html
#   Ansible's ppa is no longer needed with Ubuntu 16.04.
# sudo apt-get install -y software-properties-common
# sudo apt-add-repository -y ppa:ansible/ansible 

sudo apt-get update
sudo apt-get install -y ansible git

[ -f ~/.ssh/id_rsa ] ||  ssh-keygen -b 2048 -f ~/.ssh/id_rsa -t rsa -q -N ""
[ -f ~/.ssh/authorized_keys ] || install -m 0600 ~/.ssh/id_rsa.pub ~/.ssh/authorized_keys
grep -q localhost  ~/.ssh/known_hosts || (ssh-keyscan -t rsa,dsa localhost  >> ~/.ssh/known_hosts)
grep -q 127.0.0.1  ~/.ssh/known_hosts || (ssh-keyscan -t rsa,dsa 127.0.0.1  >> ~/.ssh/known_hosts)
grep -q github.com ~/.ssh/known_hosts || (ssh-keyscan -t rsa,dsa github.com >> ~/.ssh/known_hosts)

